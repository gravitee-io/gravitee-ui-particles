import { Meta, Story } from '@storybook/blocks';
import * as ReadmeStories from './gio-monaco-editor.stories';

<Meta of={ReadmeStories} />

# Monaco editor

Code editor component based on [Monaco editor](https://microsoft.github.io/monaco-editor/).

This component need specific configuration to work. See [Usage](#usage) for more information.

## Demo

{/* <Story id="components-monaco-editor--default" /> is deprecated, please migrate it to <Story of={referenceToStory} /> see: https://storybook.js.org/migration-guides/7.0 */}

<Story id="components-monaco-editor--default" />

## Usage

### Install

Add monaco-editor to your project

```bash
npm install monaco-editor --save
yarn add monaco-editor
```

Add monaco-editor assets to `angular.json`

```json
...
// projects > [your project name] > architect > build >
"assets": [
    ...
        {
            "glob": "**/*",
            "input": "node_modules/monaco-editor",
            "output": "assets/monaco-editor"
        }
     ...
    ]
...
```

### Config module (optional)

Change theme : (default: `vs`)

```typescript
GioMonacoEditorModule.forRoot({
    theme: 'vs-dark',
}),
```

### Use component

**Inputs**

* `formControl` - form control to bind to. Work with ReactiveFormsModule.
* `languageConfig`: `object` - language configuration of the editor.
* `options`: `IStandaloneEditorConstructionOptions` - options of the editor.
* `disableMiniMap`: `boolean` - option to disable the minimap (mini view of the document displayed on the right)

Example:

```html
<gio-monaco-editor [formControl]="control" [languageConfig]="languageConfig" [disableMiniMap]="disbaleMiniMap"></gio-monaco-editor>
```

### With Copy to clipboard option

You can enhance the editor with a copy-to-clipboard button by wrapping it inside a container that uses the gioMonacoClipboardCopy directive.
This directive automatically places a gio-clipboard-copy-icon button in the top-right corner of the container, allowing users to quickly copy the entire editor content to their clipboard.
⚠️ Note: This wrapper is designed to work with the minimap disabled.

Example:
```html
<div gioMonacoClipboardCopy class="container">
    <gio-monaco-editor
        class="editor"
        disabled
        [ngModel]="value"
        [options]="options"
        [disableMiniMap]="true"
        >
    </gio-monaco-editor>
</div>
```

## Testing

You can use `GioMonacoEditorHarness` to interact with a fake monaco editor in your tests.
The fake component use inside a simple input to simulate the editor. So don't ask it too much or you'll have to add it in the fake component.
