import { Meta, Story, Canvas } from '@storybook/blocks';
import * as ReadmeStories from './gio-save-bar.stories';

<Meta of={ReadmeStories} />

# Save Bar

Documentation and examples for save bar, a card based component to use to submit or reset forms.

## Demo

Creation mode:

<Story of={ReadmeStories.SimpleUsageInCreationMode} />

Update mode:

<Story of={ReadmeStories.SimpleUsageInUpdateMode} />

## Usage

This component was built to be used in 2 different ways:

* with Angular regular bindings, see *Direct Bindings* section.
* with Angular Forms, see *Reactive Form* section.

### Direct Bindings

```html
<gio-save-bar
    [opened]="opened"
    [invalidState]="invalidState"
    (resetClicked)="onReset($event)"
    (submitted)="onSubmit($event)"
    (submittedInvalidState)="onSubmitInvalidState($event)">
</gio-save-bar>
```

**Inputs**

* `opened`: `boolean` - Whether the save bar is opened or not.
* `invalidState`: `boolean` - Whether the object to save is in invalid state or not, it will be used to change style of the save button.

**Outputs**

* `resetClicked`: `EventEmitter<void>` - Emitted when the reset button is clicked.
* `submitted`: `EventEmitter<void>`- Emitted when the save button is clicked.
* `submittedInvalidState`: `EventEmitter<void>` - Emitted when the save button is clicked and the object to save is in invalid state.

***

### Reactive Form

To simplify interaction with forms the save bar can take a form group as input.
Then form interaction will be handled directly by the save bar:

* Save button will be in `invalidState` when the form is invalid.
* A click on the save button will trigger form submission if the form is valid.
* A click on the reset button will reset the form with data provided by the `formInitialValues` input.

ðŸš¨ *Note: The save bar will not be automatically closed when the form is submitted. To close the save bar, you need to manually mark the form as untouched with `markAsUntouched()` method.*

```html
<gio-save-bar
    [form]="form"
    [formInitialValues]="formInitialValues">
</gio-save-bar>
```

**Inputs**

* `form`: `boolean` - The reactive form to submit or reset, also used to check if the form is valid.
* `formInitialValues`: `unknown` - Initial values of the reactive form, used to reset the form after reset button is clicked.
